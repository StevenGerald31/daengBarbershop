<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- bootstrap 5.1.3 instalasi -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
      crossorigin="anonymous"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
      crossorigin="anonymous"
    ></script>
    <!-- bootstrap 5.1.3 selesai -->

    <!-- Jquery -->
    <script
      src="https://code.jquery.com/jquery-3.7.1.min.js"
      integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo="
      crossorigin="anonymous"
    ></script>

    <!-- css ekstrnal instalasi -->
    <link rel="stylesheet" href="/stylesheets/dashboardAdmin.css" />

    <title>Document</title>
</head>
<body>

    <div class="body-content h-100">
        <div class="row g-0 h-100">
            <div class="sidebarp-5 col-lg-2 collapse d-lg-block" id="navbarTogglerDemo03">
                <nav id="navbar" class="nav-menu navbar">
                    <header id="header">
                        <div class="d-flex flex-column">               
                            <header id="header">
                                <div class="d-flex flex-column">
                            
                                  <div class="profile">
                                    <img src="{{asset('tema/img/BPS.jpg')}}" alt="" class="img-fluid rounded-circle">
                                    <h1 class="text-light"><a href="index.html">Halo, nama </a></h1>
                                    <div class="social-links mt-3 text-center">
                                    </div>
                                  </div>
             <ul>
                <li><a href="dashboard" class="nav-link scrollto active"><i class="bx bx-home"></i> <span>Dashboard</span></a></li>
              <li><a href="Datapelanggan" class="nav-link scrollto"><i class="bx bx-user"></i> <span>Data Pelanggan</span></a></li>
              <li><a href="Dataserver" class="nav-link scrollto"><i class="bx bx-file-blank"></i> <span>Data Server</span></a></li>
              <li><a href="Voucher" class="nav-link scrollto"><i class="bx bx-envelope"></i> <span>Voucher</span></a></li>
              <li><a href="Konten" class="nav-link scrollto"><i class="bx bx-envelope"></i> <span>Konten</span></a></li>
                </ul>
                </nav>
            </div>
            <div class="content p-5 col-lg-10 collapse d-lg-block ">
                <div class="section-title">
                    <h2>Daeng Barbershop</h2>
                  
                    <main class="content-wrap p-center">
                        <header class="content-head">
                        </header>
                        
                        <div class="content ">
                            <section class="info-boxes">
                                <div class="info-box">
                                    <div class="box-icon">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M21 20V4a1 1 0 0 0-1-1H4a1 1 0 0 0-1 1v16a1 1 0 0 0 1 1h16a1 1 0 0 0 1-1zm-2-1H5V5h14v14z"/><path d="M10.381 12.309l3.172 1.586a1 1 0 0 0 1.305-.38l3-5-1.715-1.029-2.523 4.206-3.172-1.586a1.002 1.002 0 0 0-1.305.38l-3 5 1.715 1.029 2.523-4.206z"/></svg>
                                    </div>
                                    
                                    <div class="box-content">
                                        <span class="big text-center" id="jlhPelanggan"> </span>
                                        Pelanggan
                                    </div>
                                </div>
                                
                                <div class="info-box">
                                    <div class="box-icon">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M20 10H4a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h16a1 1 0 0 0 1-1V11a1 1 0 0 0-1-1zm-1 10H5v-8h14v8zM5 6h14v2H5zM7 2h10v2H7z"/></svg>
                                    </div>
                                    
                                    <div class="box-content">
                                        <span class="big text-center" id="jlhServer"></span>
                                        Server
                                    </div>
                                </div>
                                
                                <div class="info-box active">
                                    <div class="box-icon">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M3,21c0,0.553,0.448,1,1,1h16c0.553,0,1-0.447,1-1v-1c0-3.714-2.261-6.907-5.478-8.281C16.729,10.709,17.5,9.193,17.5,7.5 C17.5,4.468,15.032,2,12,2C8.967,2,6.5,4.468,6.5,7.5c0,1.693,0.771,3.209,1.978,4.219C5.261,13.093,3,16.287,3,20V21z M8.5,7.5 C8.5,5.57,10.07,4,12,4s3.5,1.57,3.5,3.5S13.93,11,12,11S8.5,9.43,8.5,7.5z M12,13c3.859,0,7,3.141,7,7H5C5,16.141,8.14,13,12,13z"/></svg>
                                    </div>
                                    
                                    <div class="box-content">
                                        <span class="big text-center" id="jlhVoucher">Angka</span>
                                        Voucher
                                    </div>
                                </div>
                                
                                <div class="info-box">
                                    <div class="box-icon">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M12 3C6.486 3 2 6.364 2 10.5c0 2.742 1.982 5.354 5 6.678V21a.999.999 0 0 0 1.707.707l3.714-3.714C17.74 17.827 22 14.529 22 10.5 22 6.364 17.514 3 12 3zm0 13a.996.996 0 0 0-.707.293L9 18.586V16.5a1 1 0 0 0-.663-.941C5.743 14.629 4 12.596 4 10.5 4 7.468 7.589 5 12 5s8 2.468 8 5.5-3.589 5.5-8 5.5z"/></svg>
                                    </div>
                                    
                                    <div class="box-content">
                                        <span class="big text-center" id="jlhCabang"></span>
                                        Cabang
                                    </div>
                                </div>
                
                                
                    </div>
            </div>
        </div>
       </div> 

    
    
</body>

<script>
    fetch("http://localhost:3000/admin/dataUser", {
    method: "GET",
    })
    .then((response) => response.json())
    .then((data) => {
        const idRoles = data.map(user => user.id_role);
        console.log("id role: ",idRoles);

        // ambil id_role pelanggan
        const countPelanggan = idRoles.filter(id => id === 3).length;
        console.log(countPelanggan);

        // ambil id_role server
        const countServer = idRoles.filter(id => id === 2).length;
        console.log(countServer);

        // jumlah server
        $("#jlhServer").html(countServer);
        // jumlah pelanggan
        $("#jlhPelanggan").html(countPelanggan);
    })
    .catch((error) => console.error('Error:', error));

    // ambil data server
    fetch("http://localhost:3000/admin/dataServer", {
    method: "GET",
    })
    .then((response) => response.json())
    .then((data) => {
        // kirim jlh cabang
        $("#jlhCabang").html(data.length);
    })
    .catch((error) => console.error('Error:', error));

    // ambil data vouchers
    fetch("http://localhost:3000/admin/dataVoucher", {
    method: "GET",
    })
    .then((response) => response.json())
    .then((data) => {
        // kirim jlh cabang
        $("#jlhVoucher").html(data.length);
    })
    .catch((error) => console.error('Error:', error));
</script>
</html>